# Индексы
#postgresql #index

[# SQL для начинающих: Индексы в PostgreSQL # Виды индексов SQL # EXPLAIN, ANALYZE](https://www.youtube.com/watch?v=4HZl-PkFTbA)
### SELECT amname FROM pg_am;
- B-tree (Сбалансированное дерево) - по умолчанию
- Хеш-индекс
- GIST (обобщенное дерево поиска)
- GIN (обобщенный обратный)
- SP-GIST (GIST с двоичным разбиением пространства)
- BRIN (блочно-диапазонный)

#### Balanced Tree
- Создается по умолчанию (`CREATE INDEX index_name ON table_name (column_name)`)
- Поддерживает операции:
	`<,>,<=,>=,=`
-  Поддерживает LIKE `abc%` (но не `%abc`)
- Индексирует `NULL`
- Сложность поиска `O(logN)`

#### Hash index
- `CREATE INDEX index_name ON table_name USING HASH (column_name);`
- Поддерживает только операцию '='
- Не отражается в журнале предзаписи (`WAL`)
- Сложность поиска `O(1)`

### Специализированные индексы

#### GIST (обобщенное дерево поиска)
- Применяется для индексации геометрических данных и текстовых для организации полнотекстового поиска
- Занимает меньше места на диске чем GIN
- Менее эфективен за счет доплнительных проверок
#### GIN (обобщенный обратный)
- Применяется для индексации массива или набора значений, для пар ключ значение
- Можно использовать для организации полнотекстового поиска

#### SP-GIST (GIST с двоичным разбиением пространства)
- Применяется для индексации набора данных которые подразумевают естественную упорядочность но не являются с балансированными
#### BRIN (блочно-диапазонный)
- Применяется для индексации больших набора данных которые подразумевают упорядочность 

### Инструмент профилирования

==Explain==
- `EXPLAIN query` - позволяет посмотреть план выполнения запроса
- `EXPLAIN ANALYZE query` - прогоняет запрос, показывает план и реальность
- 