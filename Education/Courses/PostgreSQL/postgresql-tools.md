# Postgresql Tools
#postgresql 

### Инструмент профилирования

==Explain==
- `EXPLAIN query` - позволяет посмотреть план выполнения запроса
```sql
=> EXPLAIN SELECT * FROM flights;
				QUERY PLAN
-------------------------------------------
Seq Scan on flights (cost=0.00..4564.67 rows=214867 width=63)
```
Выбран метод доступа Seq Scan - последовательное чтение.
В скобкаж приведен важные значения
* cost - оценка стоимости;
* rows - оцунка числа строк, возвращаемых операций;
* width - оценка размера одной записи в байтах
Стоимость указывается в некоторых условных единицах.

Приводятся два числа. Первое показывает оценку ресурсов на предварительную подготовку к операции. Для последовательного сканирования этот ноль - чтобы начать возвращать данные, никакой подготовки не требуется.

Второе число показыает общую оценку ресурсов дл
- `EXPLAIN ANALYZE query` - прогоняет запрос, показывает план и реальность

==Vacuum==
- Если вообще не обслуживать БД, то фрагментация данных будет нарастать
- VACUUM - команда для очистки *дохлых* версий строк
- VACUUM FULL - полный *компактинг* таблиц
- Необходим периодический запуск Vacuum
- Активно обновляемым БД рекомендуется проходить VACUUM каждую ночь
- VACUUM FULL только если удалили много данных
- VACUUM ANALYZE - комбинация двух операций
- AutoVacuum демон делает все автоматически